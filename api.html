<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JackAndOreo</title>
    <meta property="og:title" content="Jackandoreo.github.io">
    <meta property="og:type" content="website">
    <meta property="og:image" content="縮圖檔">
    <meta property="og:url" content="網頁路徑">
    <meta property="og:site_name" content="網頁名稱">
    <meta property="og:description" content="網頁介紹">
    <meta property="og:locale" content="zh_TW">
    <link rel="stylesheet" href="./css/indexPlug.min.css">
    <link rel="stylesheet" href="./css/spin.min.css">
    <link rel="stylesheet" href="./css/api.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="/js/jquery-3.7.1.min.js"></script>
</head>

<body>
    <div id="api_body" class="df_jc_ac">
        <div class="pokemon_name"></div>
        <div class="pokemon_order"></div>
        <div class="pokemon_type"></div>
        <div class="pokemon_image">

        </div>
        <div class="pokemon_strength">

        </div>
        <!-- 編號 名稱 屬性 持有道具 體重(G) 圖片(官方圖+動圖) 種族值-->
    </div>
    <script src="/js/fontControl.js"></script>
    <script src="/js/deviceDetect.js"></script>
    <script>
        // const url = "https://pokeapi.co/api/v2/type/3";
        // const url = "https://pokeapi.co/api/v2/pokemon/12/";

        function getData(index) {
            const url = `https://pokeapi.co/api/v2/pokemon/${index}/`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    console.log(data);

                    // 抓名稱
                    $('.pokemon_name').text(data.name);


                    // 抓圖片

                    var imgs = data.sprites;
                    var other = imgs.other.showdown;
                    var official = imgs.other['official-artwork'];
                    var version = imgs.versions;
                    console.log(imgs);

                    for (var key in imgs) {
                        if (imgs.hasOwnProperty(key)) {

                            if (key !== 'other' && key !== 'versions') {
                                console.log(key + ": " + imgs[key]);
                                var imgHtml = `<img src="${imgs[key]}" alt="${key}">`;
                                $('.pokemon_image').append(imgHtml);
                            }
                        }
                    }

                    for (var key in other) {
                        if (other.hasOwnProperty(key)) {
                            console.log('other - ' + key + ": " + other[key]);
                            var imgHtml = `<img src="${other[key]}" alt="other - ${key}">`;
                            $('.pokemon_image').append(imgHtml);
                        }
                    }

                    for (var key in official) {
                        if (official.hasOwnProperty(key)) {
                            console.log('official - ' + key + ": " + official[key]);
                            var imgHtml = `<img src="${official[key]}" alt="official - ${key}">`;
                            $('.pokemon_image').append(imgHtml);
                        }
                    }

                    // 抓種族值
                    var stats = data.stats;

                    for (let i = 0; i < stats.length; i++) {
                        var html = `<div class="strength" data-strength="${stats[i].stat.name}">
                                        <div class="strength_title"></div>
                                        <div class="strength_value">${stats[i].base_stat}</div>
                                    </div>`;
                        $('.pokemon_strength').append(html);
                    }
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        getData(12);
    </script>
</body>

</html>